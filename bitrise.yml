format_version: "11"
default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git

workflows:
  check:
    steps:
    - git::https://github.com/bitrise-steplib/steps-check.git: { }

  e2e:
    steps:
    - git::https://github.com/bitrise-steplib/steps-check.git:
        inputs:
        - workflow: e2e

  sample:
    steps:
    # - script:
    #     timeout: 180
    #     inputs:
    #     - content: |-
    #         #!/usr/bin/env bash
    #         set -eox

    #         DEVICE_UDID=$(xcrun simctl list -j | jq -r '.devices."com.apple.CoreSimulator.SimRuntime.iOS-16-0"[] | select(.name == "iPhone 8 Plus") | .udid')
    #         xcrun simctl shutdown $DEVICE_UDID || true
    #         xcrun simctl erase $DEVICE_UDID
    #         xcrun simctl boot $DEVICE_UDID

    #         set +e

    #         scripts/timeout-monitor.py -t 60 -c "xcrun simctl launch $DEVICE_UDID com.apple.mobileslideshow"
    #         if [[ $? -eq 12 ]];
    #         then
    #           envman add --key IOS_SIMULATOR_TIMEOUT --value 1
    #           exit 12
    #         fi
    - path::./: {}

  generate_readme:
    steps:
    - git::https://github.com/bitrise-steplib/steps-readme-generator.git@main:
        inputs:
        - example_section: docs/examples.md